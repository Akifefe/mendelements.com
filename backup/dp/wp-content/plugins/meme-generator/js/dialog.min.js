(function($){"use strict";$(function(){var toptext,btmtext,picture,script,date,file,alt,dir,src,image,postid,size,style,color,stroke,output,encodedText0,encodedText1;var a='#memegen_insertMeme';var b='#memegen_topText';var c='#memegen_btmText';var d='#memegen_imgURL';var e='#memegen_dialogPreview';var f='#memegen_fileName';var g='#memegen_uploadPath';var h='#post_ID';var i='#memegen_textSize';var j='#memegen_textStyle';var k='#memegen_cancelMeme';var l='#memegen_Live';var m='mceInsertContent';var n='heavycapswhite';var o='heavywhite';var p='capswhite';var q='white';var r='heavycapsblack';var s='heavyblack';var t='capsblack';var u='black';var white='FFFFFF';var black='000000';var caps='ALLCAPS';var normal='NORMAL';var pattern=/\.(gif|jpe?g|png)$/i;var verify='';if(verify===''){$.post(MemeGen.ajaxurl,{'action':'ajax_memegen_verify'},function(response){verify=response})}$(document).ready(function(){$(k).click(function(){tinyMCEPopup.close();return false})});$(document).on('click',a,function(event){event.preventDefault();$(a).prop('disabled',true);toptext=$(b).val().replace(/&/g,'&#x26;').replace(/</g,'&#x3C;').replace(/>/g,'&#x3E;').replace(/"/g,'&#x22;').replace(/'/g,'&#x27;');btmtext=$(c).val().replace(/&/g,'&#x26;').replace(/</g,'&#x3C;').replace(/>/g,'&#x3E;').replace(/"/g,'&#x22;').replace(/'/g,'&#x27;');encodedText0=encodeURIComponent(toptext);encodedText1=encodeURIComponent(btmtext);picture=encodeURIComponent($(d).val().replace(/(https?:\/\/)/g,'').replace(/ /g,'%20'));script=$(e).val();date=new Date();file=date.valueOf();alt=$(f).val();dir=$(g).val();src=dir+'/'+file+'.png';image='<img src="'+src+'" alt="'+alt+'" />';postid=$(h,window.parent.document).val();size=$(i).val();style=$(j).val();if(style===n){color=white;stroke=black;style=caps}else if(style===o){color=white;stroke=black;style=normal}else if(style===p){color=white;stroke='';style=caps}else if(style===q){color=white;stroke='';style=normal}else if(style===r){color=black;stroke=white;style=caps}else if(style===s){color=black;stroke=white;style=normal}else if(style===t){color=black;stroke='';style=caps}else if(style===u){color=black;stroke='';style=normal}if($(f).val()===''||$(b).val()===''||$(c).val()===''||$(d).val()===''||pattern.test($(d).val())===false){output='<div class="meme-form-error"><p><strong>Bad News</strong><br/>You forgot to fill out one or more of the required fields.</p></div>';$(l).html(output);$(a).prop('disabled',false);return false}$.get(script+'?run=meme_preview&picture='+picture+'&style='+style+'&color='+color+'&stroke='+stroke+'&text0='+encodedText0+'&text1='+encodedText1+'&size='+size+'&insert=yes&file='+file+'&verify='+verify).complete(function(){$.get(script+'?run=meme_insert&file='+file+'&postid='+postid+'&verify='+verify,function(){tinyMCEPopup.execCommand(m,false,image);tinyMCEPopup.close()})})});$(document).on('keyup',b+','+c,function(){toptext=$(b).val().replace(/&/g,'&#x26;').replace(/</g,'&#x3C;').replace(/>/g,'&#x3E;').replace(/"/g,'&#x22;').replace(/'/g,'&#x27;');btmtext=$(c).val().replace(/&/g,'&#x26;').replace(/</g,'&#x3C;').replace(/>/g,'&#x3E;').replace(/"/g,'&#x22;').replace(/'/g,'&#x27;');encodedText0=encodeURIComponent(toptext);encodedText1=encodeURIComponent(btmtext);picture=encodeURIComponent($(d).val().replace(/(https?:\/\/)/g,'').replace(/ /g,'%20'));script=$(e).val();size=$(i).val();style=$(j).val();if(style===n){color=white;stroke=black;style=caps}else if(style===o){color=white;stroke=black;style=normal}else if(style===p){color=white;stroke='';style=caps}else if(style===q){color=white;stroke='';style=normal}else if(style===r){color=black;stroke=white;style=caps}else if(style===s){color=black;stroke=white;style=normal}else if(style===t){color=black;stroke='';style=caps}else if(style===u){color=black;stroke='';style=normal}output='<iframe src="'+script+'?run=meme_preview&picture='+picture+'&style='+style+'&color='+color+'&stroke='+stroke+'&text0='+encodedText0+'&text1='+encodedText1+'&size='+size+'&verify='+verify+'" width="600" height="500" style="max-width:100%" allowfullscreen></iframe>';$(l).html(output)});$(document).on('change',b+','+c+','+d+','+j+','+i,function(){toptext=$(b).val().replace(/&/g,'&#x26;').replace(/</g,'&#x3C;').replace(/>/g,'&#x3E;').replace(/"/g,'&#x22;').replace(/'/g,'&#x27;');btmtext=$(c).val().replace(/&/g,'&#x26;').replace(/</g,'&#x3C;').replace(/>/g,'&#x3E;').replace(/"/g,'&#x22;').replace(/'/g,'&#x27;');encodedText0=encodeURIComponent(toptext);encodedText1=encodeURIComponent(btmtext);picture=encodeURIComponent($(d).val().replace(/(https?:\/\/)/g,'').replace(/ /g,'%20'));script=$(e).val();size=$(i).val();style=$(j).val();if(style===n){color=white;stroke=black;style=caps}else if(style===o){color=white;stroke=black;style=normal}else if(style===p){color=white;stroke='';style=caps}else if(style===q){color=white;stroke='';style=normal}else if(style===r){color=black;stroke=white;style=caps}else if(style===s){color=black;stroke=white;style=normal}else if(style===t){color=black;stroke='';style=caps}else if(style===u){color=black;stroke='';style=normal}output='<iframe src="'+script+'?run=meme_preview&picture='+picture+'&style='+style+'&color='+color+'&stroke='+stroke+'&text0='+encodedText0+'&text1='+encodedText1+'&size='+size+'&verify='+verify+'" width="600" height="500" style="max-width:100%" allowfullscreen></iframe>';$(l).html(output)})})}(jQuery));